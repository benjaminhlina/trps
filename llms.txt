# trps

Bayesian trophic position models using Stan (pronounced tropes) by
leveraging [{brms}](https://paulbuerkner.com/brms/). Equations for
trophic position models are derived from [Post
(2002)](https://esajournals.onlinelibrary.wiley.com/doi/abs/10.1890/0012-9658%282002%29083%5B0703%3AUSITET%5D2.0.CO%3B2),
[Vander Zanden and Vadeboncoeur
(2002)](https://esajournals.onlinelibrary.wiley.com/doi/full/10.1890/0012-9658%282002%29083%5B2152%3AFAIOBA%5D2.0.CO%3B2),
and [Heuvel et al. (2024)](https://doi.org/10.1139/cjfas-2024-0028) and
are to be used with stable isotope data.

## Trophic Models in {trps}

Currently {trps} supports the following models:

1.  One Source Model -
    [`one_source_model()`](https://benjaminhlina.github.io/trps/reference/one_source_model.md)

2.  Two Source Model -
    [`two_source_model()`](https://benjaminhlina.github.io/trps/reference/two_source_model.md)

3.  Two Source Model - $\alpha$ corrected ($\alpha_{r}$) -
    [`two_source_model_ar()`](https://benjaminhlina.github.io/trps/reference/two_source_model_ar.md)

4.  Two Source Model - $\alpha$ corrected ($\alpha_{r}$) - carbon mixing
    model -
    [`two_source_model_arc()`](https://benjaminhlina.github.io/trps/reference/two_source_model_arc.md)

## Installation

You can install the [CRAN
version](https://CRAN.R-project.org/package=trps) of {trps} using the
following:

``` r
install.packages("trps")
  
```

You can install the [R-Universe
version](https://benjaminhlina.r-universe.dev/trps) of {trps} using the
following:

``` r
install.packages("trps", 
                  repos = c("https://benjaminhlina.r-universe.dev",
                            "https://cloud.r-project.org"))
```

You can install the [development
version](https://github.com/benjaminhlina/trps) of {trps} using the
following:

``` r
devtools::install_github("benjaminhlina/trps")
```

To view the overall progress of the package please see
[news](https://benjaminhlina.github.io/trps/news/index.html).

## Vignettes

### Introduction

I highly suggest going through the vignettes as they will walk you
through how to use each trophic position model using {trps} and {brms}.
The first vignette to walk through is [getting started with
trps](https://benjaminhlina.github.io/trps/articles/trps.html). This
vignette will introduce you to
[{trps}](https://benjaminhlina.github.io/trps/) and how to estimate
trophic position using a one source model. You can access the vignette
by visiting the [get
started](https://benjaminhlina.github.io/trps/articles/trps.html) page
on the website or by using the following code.

``` r
vignette("trps")
```

Please go through [getting started with
trps](https://benjaminhlina.github.io/trps/articles/trps.html) prior to
walking through the other vignettes.

### Supplementary Vignettes

1.  The next vignette will walk you through how to apply
    [{trps}](https://benjaminhlina.github.io/trps/) with iterative
    processes. This vignette is titled [Estimate Trophic Position - One
    Source Model - Multiple
    Groups](https://benjaminhlina.github.io/trps/articles/estimate_trophic_position_one_source_multiple_groups.html).

2.  The third vignette to walk through is [Estimating Trophic Postion -
    Two Source
    Model](https://benjaminhlina.github.io/trps/articles/estimate_trophic_position_two_source_model.html).
    which will demonstrate how to estimate trophic position using a two
    source model.

3.  The last vignette to walk through is [Estimating Trophic Postion -
    Two Source Model -
    ar](https://benjaminhlina.github.io/trps/articles/estimate_trophic_position_two_source_model_ar.html).
    This vignette will guide you through estimating trophic position
    using a two source model using an equation based on [Heuvel et
    al. (2024)](https://doi.org/10.1139/cjfas-2024-0028) that corrects
    (i.e., scales) $\alpha$ ($\alpha_{r}$).

## Citations

To cite this package please cite the following publications

- Post, D.M. 2002. Using Stable Isotopes to Estimate Trophic Position:
  Models, Methods, and Assumptions. Ecology 83(3): 703-718. doi:
  [10.2307/3071875](https://esajournals.onlinelibrary.wiley.com/doi/full/10.1890/0012-9658%282002%29083%5B0703%3AUSITET%5D2.0.CO%3B2).

- Vander Zanden, M.J., and Vadeboncoeur, Y. 2002. Fishes as integrators
  of benthic and pelagic food webs in lakes. Ecology 83(8): 2152–2161.
  [link
  here](https://esajournals.onlinelibrary.wiley.com/doi/abs/10.1890/0012-9658(2002)083%5B2152:FAIOBA%5D2.0.CO;2).

- Heuvel, C., Zhao, Y., and Fisk, A.T. 2025. Food web structure across
  basins in Lake Erie, a large freshwater ecosystem. Canadian Journal of
  Fisheries and Aquatic Sciences 82:1-16. doi:
  [10.1139/cjfas-2024-0028](https://doi.org/10.1139/cjfas-2024-0028).

- Andersen, A.M., P.J. Blanchfield, C.E. Heuvel, K.S. McCann, B.C.
  McMeans, M.S. Ridgway, and A.T. Fisk. 2025. Influence of lake volume
  on food web metrics in a freshwater fish assemblage across a small
  range of ecosystem sizes. Canadian Journal of Fisheries and Aquatic
  Sciences 82: 1–14. doi:
  [10.1139/cjfas-2024-0226](https://doi.org/10.1139/cjfas-2024-0226)

- Hlina B.L. 2025. trps: Bayesian Trophic Position Models using ‘Stan’.
  R package version 0.1.0 (‘one-skate’).
  <https://benjaminhlina.github.io/trps/>

# Package index

## All functions

- [`add_alpha()`](https://benjaminhlina.github.io/trps/reference/add_alpha.md)
  : Calculate and add \\\alpha\\
- [`baseline_1_iso`](https://benjaminhlina.github.io/trps/reference/baseline_1_iso.md)
  : Stable isotope data for amphipods (baseline 1)
- [`baseline_2_iso`](https://benjaminhlina.github.io/trps/reference/baseline_2_iso.md)
  : Stable isotope data for dreissenids (baseline 2)
- [`combined_iso`](https://benjaminhlina.github.io/trps/reference/combined_iso.md)
  : Stable isotope data for lake trout, amphipods (benthic baseline;
  baseline 1) and dreissenids (pelagic baseline; baseline 2),
- [`consumer_iso`](https://benjaminhlina.github.io/trps/reference/consumer_iso.md)
  : Stable isotope data for lake trout (consumer)
- [`one_source_model()`](https://benjaminhlina.github.io/trps/reference/one_source_model.md)
  : Bayesian model - One Source Trophic Position
- [`one_source_priors()`](https://benjaminhlina.github.io/trps/reference/one_source_priors.md)
  : Bayesian priors - One Source Trophic Position
- [`one_source_priors_params()`](https://benjaminhlina.github.io/trps/reference/one_source_priors_params.md)
  : Adjust Bayesian priors - One Source Trophic Position
- [`two_source_model()`](https://benjaminhlina.github.io/trps/reference/two_source_model.md)
  : Bayesian model - Two Source Trophic Position
- [`two_source_model_ar()`](https://benjaminhlina.github.io/trps/reference/two_source_model_ar.md)
  : Bayesian model - Two Source Trophic Position with \\\alpha_r\\
- [`two_source_model_arc()`](https://benjaminhlina.github.io/trps/reference/two_source_model_arc.md)
  : Bayesian model - Two Source Trophic Position with \\\alpha_r\\ and
  carbon mixing model
- [`two_source_priors()`](https://benjaminhlina.github.io/trps/reference/two_source_priors.md)
  : Bayesian priors - Two Source Trophic Position
- [`two_source_priors_ar()`](https://benjaminhlina.github.io/trps/reference/two_source_priors_ar.md)
  : Bayesian priors - Two Source Trophic Position with \\\alpha_r\\
- [`two_source_priors_arc()`](https://benjaminhlina.github.io/trps/reference/two_source_priors_arc.md)
  : Bayesian priors - Two Source Trophic Position with \\\alpha_r\\ and
  carbon mixing model
- [`two_source_priors_params()`](https://benjaminhlina.github.io/trps/reference/two_source_priors_params.md)
  : Adjust Bayesian priors - Two Source Trophic Position
- [`two_source_priors_params_ar()`](https://benjaminhlina.github.io/trps/reference/two_source_priors_params_ar.md)
  : Adjust Bayesian priors - Two Source Trophic Position with
  \\\alpha_r\\
- [`two_source_priors_params_arc()`](https://benjaminhlina.github.io/trps/reference/two_source_priors_params_arc.md)
  : Adjust Bayesian priors - Two Source Trophic Position with
  \\\alpha_r\\ and carbon mixing model

# Articles

### All vignettes

- [Estimate Trophic Position - One Source Model - Multiple
  Groups](https://benjaminhlina.github.io/trps/articles/article/estimate_trophic_position_one_source_multiple_groups.md):
- [Estimate Trophic Position - Two Source Model -
  αᵣ](https://benjaminhlina.github.io/trps/articles/article/estimate_trophic_position_two_source_model_ar.md):
- [Estimate Trophic Position - Two Source
  Model](https://benjaminhlina.github.io/trps/articles/article/estimate_trophic_position_two_source_model.md):
- [Getting started with
  trps](https://benjaminhlina.github.io/trps/articles/trps.md):
